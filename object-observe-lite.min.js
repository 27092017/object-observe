Object.observe||function(e,v,t){var g,f,A="add update delete reconfigure setPrototype preventExtensions".split(" "),B=t.Node?function(a){return a&&a instanceof t.Node}:function(a){return a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},C=v.isArray||function(a){return function(c){return"[object Array]"===a.call(c)}}(e.prototype.toString),l=v.prototype.indexOf?function(a,c,b){return c.indexOf(a,b)}:function(a,c,b){for(b=b||0;b<c.length;b++)if(c[b]===a)return b;return-1},
q="undefined"!==typeof t.Map&&Map.prototype.forEach?function(){return new Map}:function(){var a=[],c=[];return{size:0,has:function(b){return-1<l(b,a)},get:function(b){return c[l(b,a)]},set:function(b,d){var h=l(b,a);-1===h?(a.push(b),c.push(d),this.size++):c[h]=d},"delete":function(b){b=l(b,a);-1<b&&(a.splice(b,1),c.splice(b,1),this.size--)},forEach:function(b,d){for(var h=0;h<a.length;h++)b.call(d,c[h],a[h],this)}}},w=e.keys||function(a){var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},
F=function(a,c,b){var d=g.get(a);d?d.handlers.set(c,x(c,a,b)):(g.set(a,d={handlers:q(),properties:B(a)?[]:w(a)}),d.handlers.set(c,x(c,a,b)),y(a,d),D(a,d),setTimeout(function E(){g.has(a)&&(r(a,d),z(d),setTimeout(E,17))},17))},D=function(a,c){for(var b=c.properties,d=c.values=[],h=0;h<b.length;)d[h]=a[b[h++]]},r=function(a,c,b){if(c.handlers.size){var d,h,e,u=c.values,k=0,g,f,m,n;d=c.properties.slice();h=d.length;for(e=w(a);k<e.length;)if(f=e[k++],g=l(f,d),m=a[f],-1===g)p(c,{name:f,type:"add",object:a},
b),c.properties.push(f),u.push(m);else if(n=u[g],d[g]=null,h--,n===m?0===n&&1/n!==1/m:n===n||m===m)p(c,{name:f,type:"update",object:a,oldValue:n},b),c.values[g]=m;for(k=d.length;h&&k--;)null!==d[k]&&(p(c,{name:d[k],type:"delete",object:a,oldValue:u[k]},b),c.properties.splice(k,1),c.values.splice(k,1),h--)}},z=function(a){a.handlers.forEach(function(a,b){a.changeRecords.length&&(b(a.changeRecords),a.changeRecords=[])})},y=function(a,c){c||(c=g.get(a));var b=c&&c.notifier;if(b)return b;b={notify:function(b){b.type;
var c=g.get(a);if(c){var e={object:a},f;for(f in b)"object"!==f&&(e[f]=b[f]);p(c,e)}},performChange:function(b,c,f){if("string"!==typeof b)throw new TypeError("Invalid non-string changeType");if("function"!==typeof c)throw new TypeError("Cannot perform non-function");var e=g.get(a),k;c=c.call(f);e&&r(a,e,b);if(e&&c&&"object"===typeof c){b={object:a,type:b};for(k in c)"object"!==k&&"type"!==k&&(b[k]=c[k]);p(e,b)}}};c&&(c.notifier=b);return b},x=function(a,c,b){var d=f.get(a),e;d?(e=d.get(c))?e.acceptList=
b:d.set(c,e={acceptList:b,changeRecords:[]}):(d=q(),d.set(c,e={acceptList:b,changeRecords:[]}),f.set(a,d));return e},p=function(a,c,b){a.handlers.forEach(function(a){(null==b||-1===l(b,a.acceptList))&&-1<l(c.type,a.acceptList)&&a.changeRecords.push(c)})};g=q();f=q();e.observe=function(a,c,b){if(null===a||"object"!==typeof a)throw new TypeError("Object.observe cannot observe non-object");if("function"!==typeof c)throw new TypeError("Object.observe cannot deliver to non-function");if(e.isFrozen&&e.isFrozen(c))throw new TypeError("Object.observe cannot deliver to a frozen function object");
C(b)||(b=A);F(a,c,b);return a};e.unobserve=function(a,c){if(null===a||"object"!==typeof a)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!==typeof c)throw new TypeError("Object.unobserve cannot deliver to non-function");var b=g.get(a),d;if(b&&b.handlers.has(c)){r(a,b);z(b);d=f.get(c);if(1===d.size&&d.get(a))f["delete"](c);else d["delete"](a);if(1===b.handlers.size)g["delete"](a);else b.handlers["delete"](c)}return a};e.getNotifier=function(a){if(null===a||"object"!==
typeof a)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return e.isFrozen&&e.isFrozen(a)?null:y(a)};e.deliverChangeRecords=function(a){if("function"!==typeof a)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var c=f.get(a);c&&c.forEach(function(b,c){r(c,g.get(c));b.changeRecords.length&&(a(b.changeRecords),b.changeRecords=[])})}}(Object,Array,this);
