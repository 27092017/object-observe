Object.observe||function(e,A,z){var k,r,F="add update delete reconfigure setPrototype preventExtensions".split(" "),G=z.Node?function(b){return b&&b instanceof z.Node}:function(b){return b&&"object"===typeof b&&"number"===typeof b.nodeType&&"string"===typeof b.nodeName},H=A.isArray||function(b){return function(c){return"[object Array]"===b.call(c)}}(e.prototype.toString),t=A.prototype.indexOf?function(b,c,a){return c.indexOf(b,a)}:function(b,c,a){for(a=a||0;a<c.length;a++)if(c[a]===b)return a;return-1},
w="undefined"!==typeof z.Map&&Map.prototype.forEach?function(){return new Map}:function(){var b=[],c=[];return{size:0,has:function(a){return-1<t(a,b)},get:function(a){return c[t(a,b)]},set:function(a,d){var h=t(a,b);-1===h?(b.push(a),c.push(d),this.size++):c[h]=d},"delete":function(a){a=t(a,b);-1<a&&(b.splice(a,1),c.splice(a,1),this.size--)},forEach:function(a,d){for(var h=0;h<b.length;h++)a.call(d,c[h],b[h],this)}}},B=e.keys||function(b){var c=[],a;for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},
x=e.getPrototypeOf||null,v=e.defineProperties?e.getOwnPropertyDescriptor:null,J=function(b,c,a){var d=k.get(b);d?d.handlers.set(c,C(c,b,a)):(k.set(b,d={handlers:w(),frozen:e.isFrozen?e.isFrozen(b):!1,extensible:e.isExtensible?e.isExtensible(b):!0,proto:x&&x(b),properties:G(b)?[]:B(b)}),d.handlers.set(c,C(c,b,a)),D(b,d),I(b,d),setTimeout(function l(){k.has(b)&&(y(b,d),E(d),setTimeout(l,17))},17))},I=function(b,c){var a=c.properties,d=c.values=[],h=0,l;if(v)for(l=c.descriptors=[];h<a.length;)l[h]=v(b,
a[h]),d[h]=b[a[h++]];else for(;h<a.length;)d[h]=b[a[h++]]},y=function(){var b=v?function(a,d,b,c,g){var f=d.properties[b],e=a[f],p=d.values[b],m=d.descriptors[b];"value"in g&&(p===e?0===p&&1/p!==1/e:p===p||e===e)&&(q(d,{name:f,type:"update",object:a,oldValue:p},c),d.values[b]=e);!m.configurable||g.configurable&&g.writable===m.writable&&g.enumerable===m.enumerable&&g.get===m.get&&g.set===m.set||(q(d,{name:f,type:"reconfigure",object:a,oldValue:p},c),d.descriptors[b]=g)}:function(a,d,b,c){var g=d.properties[b],
f=a[g],e=d.values[b];if(e===f?0===e&&1/e!==1/f:e===e||f===f)q(d,{name:g,type:"update",object:a,oldValue:e},c),d.values[b]=f},c=v?function(a,d,c,e,g){for(var f=d.length,k;c&&f--;)null!==d[f]&&(k=v(a,d[f]),c--,k?b(a,e,f,g,k):(q(e,{name:d[f],type:"delete",object:a,oldValue:e.values[f]},g),e.properties.splice(f,1),e.values.splice(f,1),e.descriptors.splice(f,1)))}:function(a,b,c,e,g){for(var f=b.length;c&&f--;)null!==b[f]&&(q(e,{name:b[f],type:"delete",object:a,oldValue:e.values[f]},g),e.properties.splice(f,
1),e.values.splice(f,1),c--)};return function(a,d,h){if(d.handlers.size&&!d.frozen){var l,g,f,k=d.values,p=d.descriptors,m=0,u,n,r;if(d.extensible)if(l=d.properties.slice(),g=l.length,f=B(a),p){for(;m<f.length;)n=f[m++],u=t(n,l),r=v(a,n),-1===u?(q(d,{name:n,type:"add",object:a},h),d.properties.push(n),k.push(a[n]),p.push(r)):(l[u]=null,g--,b(a,d,u,h,r));c(a,l,g,d,h);e.isExtensible(a)||(d.extensible=!1,q(d,{type:"preventExtensions",object:a},h),d.frozen=e.isFrozen(a))}else{for(;m<f.length;)n=f[m++],
u=t(n,l),p=a[n],-1===u?(q(d,{name:n,type:"add",object:a},h),d.properties.push(n),k.push(p)):(l[u]=null,g--,b(a,d,u,h));c(a,l,g,d,h)}else if(!d.frozen){for(;m<l.length;m++)n=l[m],b(a,d,m,h,v(a,n));e.isFrozen(a)&&(d.frozen=!0)}x&&(a=x(a),a!==d.proto&&(q(d,{type:"setPrototype",name:"__proto__",oldValue:d.proto}),d.proto=a))}}}(),E=function(b){b.handlers.forEach(function(b,a){b.changeRecords.length&&(a(b.changeRecords),b.changeRecords=[])})},D=function(b,c){c||(c=k.get(b));var a=c&&c.notifier;if(a)return a;
a={notify:function(a){a.type;var c=k.get(b);if(c){var e={object:b},g;for(g in a)"object"!==g&&(e[g]=a[g]);q(c,e)}},performChange:function(a,c,e){if("string"!==typeof a)throw new TypeError("Invalid non-string changeType");if("function"!==typeof c)throw new TypeError("Cannot perform non-function");var g=k.get(b),f;c=c.call(e);g&&y(b,g,a);if(g&&c&&"object"===typeof c){a={object:b,type:a};for(f in c)"object"!==f&&"type"!==f&&(a[f]=c[f]);q(g,a)}}};c&&(c.notifier=a);return a},C=function(b,c,a){var d=r.get(b),
e;d?(e=d.get(c))?e.acceptList=a:d.set(c,e={acceptList:a,changeRecords:[]}):(d=w(),d.set(c,e={acceptList:a,changeRecords:[]}),r.set(b,d));return e},q=function(b,c,a){b.handlers.forEach(function(b){(null==a||-1===t(a,b.acceptList))&&-1<t(c.type,b.acceptList)&&b.changeRecords.push(c)})};k=w();r=w();e.observe=function(b,c,a){if(null===b||"object"!==typeof b)throw new TypeError("Object.observe cannot observe non-object");if("function"!==typeof c)throw new TypeError("Object.observe cannot deliver to non-function");
if(e.isFrozen&&e.isFrozen(c))throw new TypeError("Object.observe cannot deliver to a frozen function object");H(a)||(a=F);J(b,c,a);return b};e.unobserve=function(b,c){if(null===b||"object"!==typeof b)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!==typeof c)throw new TypeError("Object.unobserve cannot deliver to non-function");var a=k.get(b),d;if(a&&a.handlers.has(c)){y(b,a);E(a);d=r.get(c);if(1===d.size&&d.get(b))r["delete"](c);else d["delete"](b);if(1===a.handlers.size)k["delete"](b);
else a.handlers["delete"](c)}return b};e.getNotifier=function(b){if(null===b||"object"!==typeof b)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return e.isFrozen&&e.isFrozen(b)?null:D(b)};e.deliverChangeRecords=function(b){if("function"!==typeof b)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var c=r.get(b);c&&c.forEach(function(a,c){y(c,k.get(c));a.changeRecords.length&&(b(a.changeRecords),a.changeRecords=[])})}}(Object,Array,this);
